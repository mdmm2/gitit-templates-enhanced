function convertMath(t){if(1==t.nodeType){for(var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",t.nodeName.toLowerCase()),o=0;o<t.attributes.length;o++)e.setAttribute(t.attributes[o].nodeName,t.attributes[o].nodeValue);for(var o=0;o<t.childNodes.length;o++){var n=t.childNodes[o].nodeValue;(null==n||" "!=n.slice(0,1)&&"\n"!=n.slice(0,1))&&e.appendChild(convertMath(t.childNodes[o]))}return e}return t}function convert(){for(var t,e,o,n,i=document.getElementsByTagName("math"),a=0;a<i.length;a++)if(null!=document.createElementNS)i[a].parentNode.replaceChild(convertMath(i[a]),i[a]);else{for(e="",o=i[a];"/MATH"!=o.nodeName;){if("#text"==(t=o.nodeName.toLowerCase()))e+=o.nodeValue;else{if(e+="/"==t.slice(0,1)?"</m:"+t.slice(1):"<m:"+t,"/"!=t.slice(0,1))for(var r=0;r<o.attributes.length;r++)"italic"!=o.attributes[r].nodeValue&&""!=o.attributes[r].nodeValue&&"inherit"!=o.attributes[r].nodeValue&&void 0!=o.attributes[r].nodeValue&&(e+=" "+o.attributes[r].nodeName+'="'+o.attributes[r].nodeValue+'"');e+=">"}o=o.nextSibling,o.parentNode.removeChild(o.previousSibling)}e+="</m:math>",n=document.createElement("span"),o.parentNode.replaceChild(n,o),n.innerHTML=e}}function updatePreviewPane(){$("#previewpane").hide();var t=location.pathname.replace(/_edit\//,"_preview/");$.post(t,{raw:$("#editedText").val()},function(t){if($("#previewpane").html(t),"function"==typeof convert&&convert(),"object"==typeof jsMath&&jsMath.ProcessBeforeShowing(),"object"==typeof window.MathJax){var e=document.getElementById("MathExample");MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}},"html"),$("#previewpane").fadeIn(500)}function toggleMatches(t){var t=$(this),e=$("#pattern").text(),o=t.next(".matches");o.slideToggle(300),o.highlightPattern(e,"highlighted"),"[show matches]"==t.html()?t.html("[hide matches]"):t.html("[show matches]")}null==document.createElementNS&&(document.write('<object id="mathplayer"  classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987"></object>'),document.write('<?import namespace="m" implementation="#mathplayer"?>')),void 0!==window.addEventListener&&window.addEventListener("load",convert,!1),void 0!==window.attachEvent&&window.attachEvent("onload",convert),$(document).ready(function(){"/_history/"==location.pathname.substr(0,10)&&($("#content").prepend("<p>Drag one revision onto another to see differences.</p>"),$(".difflink").draggable({helper:"clone"}),$(".difflink").droppable({accept:".difflink",drop:function(t,e){var o=parseInt($(this).attr("order")),n=parseInt($(e.draggable).attr("order")),i=$(this).attr("diffurl");if(o<n)var a=$(this).attr("revision"),r=$(e.draggable).attr("revision");else var r=$(this).attr("revision"),a=$(e.draggable).attr("revision");location.href=i+"?from="+a+"&to="+r}}))}),$(document).ready(function(){Footnotes.setup()});var Footnotes={footnotetimeout:!1,setup:function(){var t=$(".footnoteRef");t.unbind("mouseover",Footnotes.footnoteover),t.unbind("mouseout",Footnotes.footnoteoout),t.bind("mouseover",Footnotes.footnoteover),t.bind("mouseout",Footnotes.footnoteoout)},footnoteover:function(){clearTimeout(Footnotes.footnotetimeout),$("#footnotediv").stop(),$("#footnotediv").remove();var t=$(this).attr("href").substr(1),e=$(this).offset(),o=$(document.createElement("div"));o.attr("id","footnotediv"),o.bind("mouseover",Footnotes.divover),o.bind("mouseout",Footnotes.footnoteoout);var n=document.getElementById(t);o.html("<div>"+$(n).html()+"</div>"),$(document.body).append(o);var i=e.left;i+420>$(window).width()+$(window).scrollLeft()&&(i=$(window).width()-420+$(window).scrollLeft());var a=e.top+20;a+o.height()>$(window).height()+$(window).scrollTop()&&(a=e.top-o.height()-15),o.css({left:i,top:a,opacity:.95,position:"absolute"})},footnoteoout:function(){Footnotes.footnotetimeout=setTimeout(function(){$("#footnotediv").animate({opacity:0},600,function(){$("#footnotediv").remove()})},100)},divover:function(){clearTimeout(Footnotes.footnotetimeout),$("#footnotediv").stop(),$("#footnotediv").css({opacity:.9})}};$(document).ready(function(){$("#previewButton").show(),$("#editedText").focus()}),jQuery.fn.highlightPattern=function(t,e){var o=new RegExp("\\b("+t.replace(/ /,"|")+")\\b","gi"),n="<span class='"+e+"'>$1</span>";return this.each(function(){"true"!=this.getAttribute("highlighted")&&(this.innerHTML=this.innerHTML.replace(o,n),this.setAttribute("highlighted","true"))})},$(function(){$("a.showmatch").on("click",toggleMatches),$("pre.matches").hide(),$("a.showmatch").show()}),$(document).ready(function(){$("#file").change(function(){var t=$(this).val().replace(/.*\\/,"");$("#wikiname").val(t)})});
